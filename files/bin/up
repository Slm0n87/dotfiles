#!/bin/bash

GREEN="\033[32m"
DEFAULT="\033[0m"

set -e

function announce() {
  printf "%b\n" "$GREEN$*"
  printf "%b" "$DEFAULT"
}

announce 'Updating Homebrew...'
brew update
brew upgrade --all
brew reinstall --HEAD fzf neovim

announce 'Updating RVM...'
# shellcheck disable=SC1091
source ~/.rvm/scripts/rvm
rvm get stable
rvm reload

announce 'Updating Vim plugins...'
nvim +PlugUpgrade +"source \$MYVIMRC" +PlugUpdate +qa

announce 'Updating APM...'
pushd ~/code/apm_bundle
git checkout master
git fetch --prune
git merge origin/master --ff-only
buns
migs
popd
