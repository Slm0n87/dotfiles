#!/bin/bash

GREEN="\033[32m"
DEFAULT="\033[0m"

set -e

function announce() {
  printf "%bUpdating %b...\n" "$GREEN" "$*"
  printf "%b" "$DEFAULT"
}

announce 'Homebrew'
brew update
brew upgrade --all
brew reinstall --HEAD fzf neovim

announce 'RVM'
# shellcheck disable=SC1091 disable=SC1090
source ~/.rvm/scripts/rvm
rvm get stable
rvm reload

announce 'Vim plugins'
nvim +PlugUpgrade +"source \$MYVIMRC" +PlugUpdate +qa

announce 'APM'
pushd ~/code/apm_bundle
git checkout master || exit 1
apm update
popd
