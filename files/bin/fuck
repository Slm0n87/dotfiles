#!/bin/sh

MYSQL_JOB_NAME='homebrew.mxcl.mysql'
PROPERTY_DIR="$HOME/code/apm_bundle/apps/property"

function fuck_mysql() {
  launchctl stop $MYSQL_JOB_NAME
  printf 'Waiting for mysqld to die. Maybe you should grab a beer.'
  while pgrep mysqld &>/dev/null; do
    printf '.'
    sleep 0.1
  done
  echo
  launchctl start $MYSQL_JOB_NAME
}

function fuck_solr() {
  cd "$PROPERTY_DIR"
  rake solr:reindex
}

case "$1" in
  mysql)
    fuck_mysql
    ;;
  solr)
    fuck_solr
    ;;
  *)
    echo "Fuck $1?! FUCK YOU!"
esac
